# Kibana Configuration for Gough Hypervisor Log Analysis
# Provides visualization and analysis interface for ELK stack

# Server configuration
server.host: "0.0.0.0"
server.port: 5601
server.name: "gough-kibana"
server.publicBaseUrl: "http://localhost:5601"

# Elasticsearch configuration
elasticsearch.hosts: ["http://elasticsearch:9200"]
elasticsearch.username: "kibana_system"
elasticsearch.password: "kibana_password"

# Index patterns
elasticsearch.requestTimeout: 90000
elasticsearch.shardTimeout: 30000

# Monitoring
monitoring.enabled: true
monitoring.ui.enabled: true
monitoring.kibana.collection.enabled: true
monitoring.kibana.collection.interval: 10000

# Logging
logging.level: info
logging.appenders:
  default:
    type: console
    layout:
      type: json
logging.loggers:
  - name: http.server.response
    level: debug

# Security (basic setup)
xpack.security.enabled: false
xpack.encryptedSavedObjects.encryptionKey: "gough-kibana-encryption-key-32-chars"

# Features
xpack.reporting.enabled: true
xpack.canvas.enabled: true
xpack.infra.enabled: true
xpack.logs.enabled: true
xpack.apm.enabled: false

# Maps
xpack.maps.enabled: true
map.includeElasticMapsService: true

# Machine learning
xpack.ml.enabled: false

# Alerting
xpack.alerting.enabled: true
xpack.actions.enabled: true

# Saved objects
savedObjects.maxImportPayloadBytes: 26214400

# Data views
data.search.aggs.shardDelay.enabled: true

# UI settings
newsfeed.enabled: false
telemetry.enabled: false
telemetry.optIn: false

# Dashboard settings
dashboard.defaultDarkMode: false

# Advanced settings
csp.rules:
  - "script-src 'unsafe-eval' 'unsafe-inline'"
  - "worker-src blob:"
  - "child-src blob:"