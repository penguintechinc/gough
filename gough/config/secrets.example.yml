---
# MaaS Infrastructure Secrets Configuration
# Store sensitive configuration data here
# Copy this file to config/secrets.yml and customize

# WARNING: Never commit secrets.yml to version control!
# Add config/secrets.yml to your .gitignore file

# =============================================================================
# ENCRYPTION KEYS
# =============================================================================

# Application secret keys (generate with: openssl rand -hex 32)
application_secret_key: "change-this-secret-key-in-production-must-be-32-chars-minimum"
jwt_secret_key: "change-this-jwt-key-for-token-signing-32-chars-minimum"
session_secret_key: "change-this-session-key-for-web-sessions-32-chars"

# Database encryption key (generate with: openssl rand -base64 32)
database_encryption_key: "changethisdatabaseencryptionkeybase64=="

# =============================================================================
# API KEYS AND TOKENS
# =============================================================================

# MaaS API credentials
maas:
  consumer_key: "change-this-consumer-key"
  token_key: "change-this-token-key"
  token_secret: "change-this-token-secret"
  api_key: "change-this-consumer-key:change-this-token-key:change-this-token-secret"

# FleetDM API token (generate in Fleet UI)
fleetdm:
  api_token: "change-this-fleet-api-token"
  enroll_secret: "change-this-osquery-enroll-secret"

# Agent API keys (generate unique key per agent)
agents:
  default_api_key: "change-this-default-agent-api-key"
  master_api_key: "change-this-master-agent-api-key"

# External service API keys
external_apis:
  slack_webhook: "https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"
  prometheus_token: "change-this-prometheus-token"
  grafana_token: "change-this-grafana-token"

# =============================================================================
# DATABASE CREDENTIALS
# =============================================================================

databases:
  postgresql:
    host: "postgres"
    port: 5432
    database: "management"
    username: "postgres"
    password: "change-this-postgres-password"
    ssl_mode: "prefer"
    
  mysql:
    host: "mysql"
    port: 3306
    database: "fleet"
    username: "fleet"
    password: "change-this-mysql-password"
    charset: "utf8mb4"
    
  redis:
    host: "redis"
    port: 6379
    password: "change-this-redis-password"
    database: 0
    ssl: false

# =============================================================================
# SSL/TLS CERTIFICATES
# =============================================================================

ssl_certificates:
  # Certificate contents (or paths to certificate files)
  ca_certificate: |
    -----BEGIN CERTIFICATE-----
    # Replace with your CA certificate
    -----END CERTIFICATE-----
    
  server_certificate: |
    -----BEGIN CERTIFICATE-----
    # Replace with your server certificate
    -----END CERTIFICATE-----
    
  server_private_key: |
    -----BEGIN PRIVATE KEY-----
    # Replace with your server private key
    -----END PRIVATE KEY-----

# =============================================================================
# SSH KEYS
# =============================================================================

ssh_keys:
  # Public keys for user authentication
  maas_user_public_key: "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIChangeThisWithYourActualPublicKey maas@infrastructure"
  ansible_user_public_key: "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIChangeThisWithYourAnsiblePublicKey ansible@automation"
  
  # Private keys for automation (store securely)
  ansible_private_key: |
    -----BEGIN OPENSSH PRIVATE KEY-----
    # Replace with your Ansible private key
    -----END OPENSSH PRIVATE KEY-----

# =============================================================================
# USER ACCOUNT PASSWORDS
# =============================================================================

user_accounts:
  # Password hashes (generate with: mkpasswd -m sha-512)
  maas_user_password_hash: "$6$rounds=4096$salt$hashChangeThisPassword"
  ansible_user_password_hash: "$6$rounds=4096$salt$hashChangeThisPassword"
  
  # Admin account credentials
  maas_admin_password: "change-this-maas-admin-password"
  fleet_admin_password: "change-this-fleet-admin-password"
  portainer_admin_password: "change-this-portainer-admin-password"

# =============================================================================
# BACKUP CREDENTIALS
# =============================================================================

backup:
  # Local backup encryption passphrase
  encryption_passphrase: "change-this-backup-encryption-passphrase"
  
  # AWS S3 credentials for backup storage
  aws:
    access_key_id: "CHANGE_THIS_AWS_ACCESS_KEY"
    secret_access_key: "change-this-aws-secret-access-key"
    region: "us-east-1"
    bucket: "maas-infrastructure-backups"
    
  # Google Cloud Storage credentials
  gcs:
    service_account_key: |
      {
        "type": "service_account",
        "project_id": "your-project",
        "private_key_id": "change-this",
        "private_key": "-----BEGIN PRIVATE KEY-----\nchange-this\n-----END PRIVATE KEY-----\n",
        "client_email": "backup@your-project.iam.gserviceaccount.com",
        "client_id": "change-this",
        "auth_uri": "https://accounts.google.com/o/oauth2/auth",
        "token_uri": "https://oauth2.googleapis.com/token"
      }
    bucket: "maas-infrastructure-backups"

# =============================================================================
# NOTIFICATION CREDENTIALS
# =============================================================================

notifications:
  email:
    smtp_server: "smtp.gmail.com"
    smtp_port: 587
    username: "your-email@gmail.com"
    password: "your-email-app-password"
    use_tls: true
    
  slack:
    webhook_url: "https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"
    bot_token: "xoxb-your-slack-bot-token"
    
  discord:
    webhook_url: "https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK"
    
  teams:
    webhook_url: "https://outlook.office.com/webhook/YOUR/TEAMS/WEBHOOK"

# =============================================================================
# MONITORING CREDENTIALS
# =============================================================================

monitoring:
  prometheus:
    username: "prometheus"
    password: "change-this-prometheus-password"
    
  grafana:
    admin_password: "change-this-grafana-password"
    secret_key: "change-this-grafana-secret-key"
    
  elasticsearch:
    username: "elastic"
    password: "change-this-elasticsearch-password"

# =============================================================================
# THIRD-PARTY SERVICE CREDENTIALS
# =============================================================================

services:
  # Docker registry credentials
  docker_registry:
    username: "your-registry-username"
    password: "your-registry-password"
    
  # Vulnerability scanning
  vulnerability_scanner:
    api_key: "change-this-vulnerability-scanner-api-key"
    
  # DNS provider (for dynamic DNS updates)
  dns_provider:
    api_key: "change-this-dns-provider-api-key"
    secret_key: "change-this-dns-provider-secret"

# =============================================================================
# DEVELOPMENT SECRETS
# =============================================================================

development:
  # Use different secrets for development
  debug_api_key: "development-debug-api-key"
  test_database_password: "test-database-password"
  mock_service_token: "mock-service-token"

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

security:
  # Rate limiting
  rate_limit_secret: "change-this-rate-limit-secret"
  
  # CSRF protection
  csrf_secret: "change-this-csrf-protection-secret"
  
  # API security
  api_signature_key: "change-this-api-signature-key"
  
  # Audit logging
  audit_encryption_key: "change-this-audit-log-encryption-key"

# =============================================================================
# USAGE NOTES
# =============================================================================

# How to generate secure secrets:
# - Random hex (32 bytes): openssl rand -hex 32
# - Random base64 (32 bytes): openssl rand -base64 32
# - Password hash: mkpasswd -m sha-512 your-password
# - SSH key pair: ssh-keygen -t ed25519 -C "comment"
# - JWT secret: python3 -c "import secrets; print(secrets.token_urlsafe(32))"

# Security best practices:
# 1. Use unique, randomly generated secrets for each environment
# 2. Rotate secrets regularly (at least every 90 days)
# 3. Store secrets in a secure vault (HashiCorp Vault, AWS Secrets Manager, etc.)
# 4. Never commit this file to version control
# 5. Limit access to this file (chmod 600)
# 6. Use environment-specific secret files
# 7. Monitor access to secrets and audit regularly