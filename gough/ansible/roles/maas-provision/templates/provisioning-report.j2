{
  "provisioning_report": {
    "timestamp": "{{ provisioning_data.timestamp }}",
    "maas_version": "{{ provisioning_data.maas_version }}",
    "request": {
      "machine_count": {{ provisioning_data.machine_count }},
      "machine_role": "{{ provisioning_data.machine_role }}",
      "environment": "{{ provisioning_data.environment }}",
      "ubuntu_series": "{{ ubuntu_series }}",
      "architecture": "{{ architecture }}"
    },
    "results": {
      "deployed_count": {{ provisioning_data.deployed_count | default(0) }},
      "success_rate": {{ ((provisioning_data.deployed_count | default(0) | float) / (provisioning_data.machine_count | int) * 100) | round(2) }},
      "deployed_machines": [
        {% for machine in provisioning_data.deployed_machines %}
        {
          "hostname": "{{ machine.hostname }}",
          "system_id": "{{ machine.system_id }}",
          "ip_addresses": {{ machine.ip_addresses | to_json }},
          "status": "{{ machine.status_name }}",
          "cpu_count": {{ machine.cpu_count }},
          "memory_mb": {{ machine.memory }},
          "storage_gb": {{ machine.storage | default(0) }},
          "architecture": "{{ machine.architecture }}",
          "power_type": "{{ machine.power_type }}",
          "zone": "{{ machine.zone.name if machine.zone else 'default' }}",
          "tags": {{ machine.tag_names | to_json if machine.tag_names else [] }}
        }{% if not loop.last %},{% endif %}
        {% endfor %}
      ]
    },
    "statistics": {
      "total_cpu_cores": {{ provisioning_data.deployed_machines | sum(attribute='cpu_count') | default(0) }},
      "total_memory_gb": {{ (provisioning_data.deployed_machines | sum(attribute='memory') | default(0) / 1024) | round(2) }},
      "total_storage_gb": {{ provisioning_data.deployed_machines | sum(attribute='storage') | default(0) }},
      "average_deploy_time": "{{ deployment_timeout_minutes }}min"
    }
  }
}