---
# MaaS Infrastructure Ansible Inventory
# This inventory is dynamically updated by the management server

all:
  children:
    infrastructure:
      children:
        maas_servers:
          hosts:
            maas-controller:
              ansible_host: 172.20.0.10
              ansible_user: maas
              maas_role: controller
              
        management_servers:
          hosts:
            management-01:
              ansible_host: 172.20.0.2
              ansible_user: maas
              
        fleet_servers:
          hosts:
            fleet-01:
              ansible_host: 172.20.0.3
              ansible_user: maas
              
    deployed_servers:
      children:
        docker_hosts:
          vars:
            server_role: docker_host
            cloud_init_template: docker-host
            package_config: docker_standard
          hosts:
            # Dynamically populated by management server
            
        kubernetes_nodes:
          vars:
            server_role: kubernetes_node
            cloud_init_template: k8s-node
            package_config: kubernetes_standard
          hosts:
            # Dynamically populated by management server
            
        general_servers:
          vars:
            server_role: general_server
            cloud_init_template: base-server
            package_config: base_standard
          hosts:
            # Dynamically populated by management server

  vars:
    # Global variables for all hosts
    ansible_ssh_common_args: '-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
    ansible_python_interpreter: /usr/bin/python3
    
    # MaaS configuration
    maas_url: "http://172.20.0.10:5240/MAAS/"
    maas_api_version: "2.0"
    
    # Management server configuration
    management_server_url: "http://172.20.0.2:8000"
    
    # FleetDM configuration
    fleet_url: "https://172.20.0.3:8443"
    
    # Common paths
    agent_install_path: "/opt/maas-agent"
    logs_path: "/var/log/maas"
    
    # Time zone and locale
    timezone: "UTC"
    locale: "en_US.UTF-8"
    
    # Network configuration
    management_subnet: "172.20.0.0/16"
    dns_servers:
      - "8.8.8.8"
      - "8.8.4.4"
      
    # Security settings
    ssh_key_type: "ed25519"
    fail2ban_enabled: true
    ufw_enabled: true
    
    # Service defaults
    docker_enabled: true
    lxd_enabled: true
    osquery_enabled: true
    monitoring_enabled: true